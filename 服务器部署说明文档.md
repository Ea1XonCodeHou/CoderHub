å¥½çš„ï¼æˆ‘æ¥å¸®ä½ å…¨é¢åˆ†æå¹¶æ€»ç»“ `/opt/coderhub` çš„å®Œæ•´ç»“æ„ã€‚

[11 tools called]

å®Œç¾ï¼ç°åœ¨æˆ‘ä¸ºä½ ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®ç»“æ„æ–‡æ¡£ï¼š

---

# CoderHub æœåŠ¡å™¨éƒ¨ç½²ç»“æ„æ–‡æ¡£

**æœåŠ¡å™¨ä¿¡æ¯ï¼š**
- IP: 8.140.19.7
- éƒ¨ç½²è·¯å¾„: `/opt/coderhub`
- Git åˆ†æ”¯: `feature/server-deploy`
- éƒ¨ç½²æ–¹å¼: Docker Compose

---

## ğŸ“ ä¸€ã€é¡¹ç›®ç›®å½•ç»“æ„

```
/opt/coderhub/                          # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ .git/                               # Git ç‰ˆæœ¬æ§åˆ¶ï¼ˆå·²åˆå§‹åŒ–ï¼‰
â”œâ”€â”€ .gitignore                          # Git å¿½ç•¥é…ç½®ï¼ˆå·²é…ç½®æ’é™¤æ•°æ®ç›®å½•ï¼‰
â”‚
â”œâ”€â”€ docker-compose.yml                  # ğŸ”‘ Docker ç¼–æ’é…ç½®ï¼ˆæ ¸å¿ƒéƒ¨ç½²æ–‡ä»¶ï¼‰
â”‚
â”œâ”€â”€ coderhub_backend/                   # åç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ pom.xml                         # ğŸ”‘ Maven çˆ¶å·¥ç¨‹é…ç½®
â”‚   â”œâ”€â”€ settings.xml                    # Maven é˜¿é‡Œäº‘é•œåƒé…ç½®
â”‚   â”œâ”€â”€ Dockerfile                      # ğŸ”‘ åç«¯é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ coderhub-common/                # å…¬å…±æ¨¡å—ï¼ˆå·¥å…·ç±»ã€å¸¸é‡ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ pom.xml
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ coderhub-pojo/                  # å®ä½“ç±»æ¨¡å—ï¼ˆEntityã€DTOã€VOï¼‰
â”‚   â”‚   â”œâ”€â”€ pom.xml
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚
â”‚   â””â”€â”€ coderhub-server/                # ä¸»åº”ç”¨æ¨¡å—ï¼ˆControllerã€Serviceã€Mapperï¼‰
â”‚       â”œâ”€â”€ pom.xml
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ main/
â”‚               â”œâ”€â”€ java/
â”‚               â”‚   â””â”€â”€ com/eaxon/coderhubserver/
â”‚               â”‚       â”œâ”€â”€ CoderhubServerApplication.java  # å¯åŠ¨ç±»
â”‚               â”‚       â”œâ”€â”€ config/                         # é…ç½®ç±»
â”‚               â”‚       â”‚   â””â”€â”€ ChromaDBConfig.java         # å‘é‡æ•°æ®åº“é…ç½®
â”‚               â”‚       â”œâ”€â”€ controller/                     # æ§åˆ¶å™¨
â”‚               â”‚       â”œâ”€â”€ service/                        # ä¸šåŠ¡é€»è¾‘
â”‚               â”‚       â””â”€â”€ mapper/                         # æ•°æ®è®¿é—®
â”‚               â”‚
â”‚               â””â”€â”€ resources/
â”‚                   â”œâ”€â”€ application.yml              # ğŸ”‘ Spring Boot ä¸»é…ç½®
â”‚                   â”œâ”€â”€ application-dev.yml          # ğŸ”‘ å¼€å‘ç¯å¢ƒé…ç½®
â”‚                   â”œâ”€â”€ application-prod.yml         # ğŸ”‘ ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚                   â””â”€â”€ mapper/                      # MyBatis XML æ˜ å°„æ–‡ä»¶
â”‚
â”œâ”€â”€ coderhub_frontend/                  # å‰ç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ package.json                    # ğŸ”‘ Node.js ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.js                  # Vite æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ Dockerfile                      # ğŸ”‘ å‰ç«¯é•œåƒæ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ nginx.conf                      # ğŸ”‘ Nginx åå‘ä»£ç†é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ src/                            # Vue3 æºç 
â”‚   â”‚   â”œâ”€â”€ main.js                     # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue                     # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/                     # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ views/                      # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/                 # å…¬å…±ç»„ä»¶
â”‚   â”‚   â””â”€â”€ assets/                     # é™æ€èµ„æº
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                         # å…¬å…±é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ dist/                           # æ„å»ºäº§ç‰©ï¼ˆä¸æäº¤ Gitï¼‰
â”‚   â””â”€â”€ node_modules/                   # ä¾èµ–åŒ…ï¼ˆä¸æäº¤ Gitï¼‰
â”‚
â”œâ”€â”€ chroma/                             # ğŸ—„ï¸ ChromaDB æ•°æ®ç›®å½•ï¼ˆ156KBï¼‰
â”‚   â””â”€â”€ data/                           # å‘é‡æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨
â”‚
â”œâ”€â”€ minio/                              # ğŸ—„ï¸ MinIO æ•°æ®ç›®å½•ï¼ˆ2.1MBï¼‰
â”‚   â””â”€â”€ data/                           # å¯¹è±¡å­˜å‚¨æ–‡ä»¶
â”‚
â”œâ”€â”€ mysql/                              # ğŸ—„ï¸ MySQL æ•°æ®ç›®å½•ï¼ˆ203MBï¼‰
â”‚   â”œâ”€â”€ data/                           # æ•°æ®åº“æ–‡ä»¶
â”‚   â””â”€â”€ init/                           # åˆå§‹åŒ– SQL è„šæœ¬
â”‚
â””â”€â”€ redis/                              # ğŸ—„ï¸ Redis æ•°æ®ç›®å½•ï¼ˆ12KBï¼‰
    â””â”€â”€ data/                           # ç¼“å­˜æŒä¹…åŒ–æ•°æ®
```

**å›¾ä¾‹è¯´æ˜ï¼š**
- ğŸ”‘ = å…³é”®é…ç½®/éƒ¨ç½²æ–‡ä»¶
- ğŸ—„ï¸ = æ•°æ®ç›®å½•ï¼ˆä¸çº³å…¥ Git ç‰ˆæœ¬æ§åˆ¶ï¼‰

---

## ğŸ“‹ äºŒã€å…³é”®é…ç½®æ–‡ä»¶è¯¦è§£

### **1. docker-compose.ymlï¼ˆå®¹å™¨ç¼–æ’é…ç½®ï¼‰**

| æœåŠ¡å | é•œåƒ | å®¹å™¨å | ç«¯å£æ˜ å°„ | å†…å­˜é™åˆ¶ | è¯´æ˜ |
|--------|------|--------|----------|----------|------|
| **mysql** | mysql:8.0 | coderhub-mysql | 3306:3306 | 512M | ä¸»æ•°æ®åº“ |
| **redis** | redis:7.0 | coderhub-redis | 6379:6379 | 256M | ç¼“å­˜æœåŠ¡ |
| **minio** | minio/minio | coderhub-minio | 9000:9000<br>9090:9090 | 300M | å¯¹è±¡å­˜å‚¨<br>ï¼ˆæ§åˆ¶å°ï¼‰ |
| **chroma** | chromadb/chroma:0.5.0 | coderhub-chroma | 8000:8000 | 300M | å‘é‡æ•°æ®åº“ï¼ˆRAGï¼‰ |
| **app** | æœ¬åœ°æ„å»º | coderhub-app | 8080:8080 | 800M | åç«¯åº”ç”¨ |
| **web** | æœ¬åœ°æ„å»º | coderhub-web | 80:80 | 300M | å‰ç«¯åº”ç”¨ + Nginx |

**æ€»å†…å­˜å ç”¨ï¼š** ~2.5GBï¼ˆé’ˆå¯¹ 2GB ECS è¿›è¡Œäº†ä¼˜åŒ–ï¼‰

**å…³é”®é…ç½®ï¼š**
```yaml
# åç«¯ç¯å¢ƒå˜é‡
environment:
  - SPRING_PROFILES_ACTIVE=prod              # æ¿€æ´»ç”Ÿäº§ç¯å¢ƒé…ç½®
  - SPRING_DATA_REDIS_HOST=redis             # Redis å®¹å™¨å
  - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/coder_hub
  - SPRING_DATASOURCE_USERNAME=root
  - SPRING_DATASOURCE_PASSWORD=Hyc20040825
```

**âš ï¸ å®‰å…¨æç¤ºï¼š** å¯†ç æ˜æ–‡å­˜å‚¨ï¼Œå»ºè®®åç»­æ”¹ç”¨ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆ`.env`ï¼‰

---

### **2. coderhub_backend/Dockerfileï¼ˆåç«¯é•œåƒæ„å»ºï¼‰**

**æ„å»ºç­–ç•¥ï¼š** å¤šé˜¶æ®µæ„å»ºï¼ˆMulti-stage Buildï¼‰

| é˜¶æ®µ | åŸºç¡€é•œåƒ | ä½œç”¨ | äº§ç‰© |
|------|----------|------|------|
| **Build Stage** | maven:3.8.5-openjdk-17 | Maven æ‰“åŒ… | JAR æ–‡ä»¶ |
| **Runtime Stage** | openjdk:17-jdk-slim | è¿è¡Œåº”ç”¨ | è½»é‡çº§å®¹å™¨ |

**å…³é”®é…ç½®ï¼š**
```dockerfile
# JVM å†…å­˜ä¼˜åŒ–ï¼ˆé’ˆå¯¹ 2GB æœåŠ¡å™¨ï¼‰
ENTRYPOINT ["java", "-Dspring.profiles.active=prod", "-Xmx512m", "-Xms256m", "-jar", "app.jar"]
```

**ä¾èµ–ä¸‹è½½åŠ é€Ÿï¼š**
- ä½¿ç”¨ `settings.xml` é…ç½®é˜¿é‡Œäº‘ Maven é•œåƒ
- åˆ©ç”¨ Docker ç¼“å­˜æœºåˆ¶ï¼ˆå…ˆå¤åˆ¶ pom.xmlï¼Œå†å¤åˆ¶æºç ï¼‰

---

### **3. coderhub_frontend/Dockerfileï¼ˆå‰ç«¯é•œåƒæ„å»ºï¼‰**

**æ„å»ºç­–ç•¥ï¼š** å¤šé˜¶æ®µæ„å»º

| é˜¶æ®µ | åŸºç¡€é•œåƒ | ä½œç”¨ | äº§ç‰© |
|------|----------|------|------|
| **Build Stage** | node:20-alpine | npm build | dist/ é™æ€æ–‡ä»¶ |
| **Production Stage** | nginx:stable-alpine | é™æ€æ–‡ä»¶æœåŠ¡ | Nginx å®¹å™¨ |

**å…³é”®é…ç½®ï¼š**
```dockerfile
# npm åŠ é€Ÿï¼ˆä½¿ç”¨æ·˜å®é•œåƒï¼‰
RUN npm config set registry https://registry.npmmirror.com
```

---

### **4. coderhub_frontend/nginx.confï¼ˆå‰ç«¯åå‘ä»£ç†ï¼‰**

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
1. é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆVue æ„å»ºäº§ç‰©ï¼‰
2. åå‘ä»£ç†åç«¯ APIï¼ˆè§£å†³è·¨åŸŸï¼‰
3. SPA è·¯ç”±æ”¯æŒï¼ˆ`try_files`ï¼‰

**å…³é”®é…ç½®ï¼š**
```nginx
# å‰ç«¯è·¯ç”±ï¼ˆVue Router History æ¨¡å¼ï¼‰
location / {
    try_files $uri $uri/ /index.html;  # æ‰€æœ‰è·¯ç”±æŒ‡å‘ index.html
}

# åç«¯ API ä»£ç†ï¼ˆ/api/* â†’ http://app:8080/*ï¼‰
location /api/ {
    proxy_pass http://app:8080/;       # app æ˜¯ Docker Compose æœåŠ¡å
}
```

**è®¿é—®æµç¨‹ï¼š**
```
ç”¨æˆ·æµè§ˆå™¨ â†’ http://8.140.19.7/api/xxx 
           â†’ Nginx å®¹å™¨ (web)
           â†’ åå‘ä»£ç†åˆ° http://app:8080/xxx
           â†’ Spring Boot å®¹å™¨ (app)
```

---

### **5. pom.xmlï¼ˆMaven é¡¹ç›®é…ç½®ï¼‰**

**é¡¹ç›®ç»“æ„ï¼š** å¤šæ¨¡å— Maven å·¥ç¨‹

| æ¨¡å— | èŒè´£ | ä¾èµ–å…³ç³» |
|------|------|----------|
| **coderhub_backend** | çˆ¶å·¥ç¨‹ | ç»Ÿä¸€ç‰ˆæœ¬ç®¡ç† |
| **coderhub-common** | å…¬å…±å·¥å…· | è¢«å…¶ä»–æ¨¡å—ä¾èµ– |
| **coderhub-pojo** | å®ä½“ç±» | è¢«å…¶ä»–æ¨¡å—ä¾èµ– |
| **coderhub-server** | ä¸»åº”ç”¨ | ä¾èµ– common + pojo |

**æ ¸å¿ƒä¾èµ–ï¼š**
- Spring Boot 3.2.5
- Java 17
- MySQL 8.0
- MyBatis 3.0.3
- Redisï¼ˆSpring Data Redisï¼‰
- MinIO 8.5.9
- LangChain4j 0.35.0ï¼ˆAI åŠŸèƒ½ï¼‰
- ChromaDBï¼ˆå‘é‡æ•°æ®åº“ï¼‰

---

### **6. application.yml ç³»åˆ—ï¼ˆSpring Boot é…ç½®ï¼‰**

**é…ç½®æ–‡ä»¶å±‚çº§ï¼š**

| æ–‡ä»¶ | ä¼˜å…ˆçº§ | ç”¨é€” | æ˜¯å¦æäº¤ Git |
|------|--------|------|-------------|
| **application.yml** | æœ€ä½ | é€šç”¨é…ç½® | âœ… æäº¤ |
| **application-dev.yml** | ä¸­ | æœ¬åœ°å¼€å‘ | âœ… æäº¤ |
| **application-prod.yml** | é«˜ | ç”Ÿäº§ç¯å¢ƒ | âš ï¸ è°¨æ…æäº¤ï¼ˆå«æ•æ„Ÿä¿¡æ¯ï¼‰ |

**æ¿€æ´»æ–¹å¼ï¼š**
```bash
# å¼€å‘ç¯å¢ƒ
java -jar app.jar --spring.profiles.active=dev

# ç”Ÿäº§ç¯å¢ƒï¼ˆDocker ä¸­å·²é…ç½®ï¼‰
java -jar app.jar --spring.profiles.active=prod
```

**å…³é”®é…ç½®é¡¹ï¼š**
- æ•°æ®åº“è¿æ¥ï¼ˆMySQLï¼‰
- Redis è¿æ¥
- MinIO é…ç½®
- ChromaDB é…ç½®
- é˜¿é‡Œäº‘ API Keyï¼ˆAI åŠŸèƒ½ï¼‰

---

## ğŸ”„ ä¸‰ã€éƒ¨ç½²æµç¨‹

### **å®Œæ•´éƒ¨ç½²æµç¨‹ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ä»£ç å‡†å¤‡                                                 â”‚
â”‚     - æœ¬åœ°å¼€å‘å®Œæˆ                                           â”‚
â”‚     - Git æäº¤åˆ° feature/server-deploy åˆ†æ”¯                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ¨é€åˆ° GitHub                                            â”‚
â”‚     git push origin feature/server-deploy                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æœåŠ¡å™¨æ‹‰å–ä»£ç                                            â”‚
â”‚     ssh root@8.140.19.7                                     â”‚
â”‚     cd /opt/coderhub                                        â”‚
â”‚     git pull origin feature/server-deploy                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ„å»ºå¹¶å¯åŠ¨å®¹å™¨                                           â”‚
â”‚     docker-compose up -d --build                            â”‚
â”‚                                                             â”‚
â”‚     æ‰§è¡Œæ­¥éª¤ï¼š                                               â”‚
â”‚     â‘  æ„å»ºåç«¯é•œåƒï¼ˆMaven æ‰“åŒ… â†’ ç”Ÿæˆ JAR â†’ æ‰“åŒ…é•œåƒï¼‰      â”‚
â”‚     â‘¡ æ„å»ºå‰ç«¯é•œåƒï¼ˆnpm build â†’ ç”Ÿæˆ dist â†’ æ‰“åŒ…é•œåƒï¼‰      â”‚
â”‚     â‘¢ æ‹‰å–åŸºç¡€é•œåƒï¼ˆMySQLã€Redisã€MinIOã€ChromaDBï¼‰         â”‚
â”‚     â‘£ å¯åŠ¨æ‰€æœ‰å®¹å™¨ï¼ˆæŒ‰ä¾èµ–é¡ºåºï¼‰                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. å¥åº·æ£€æŸ¥                                                 â”‚
â”‚     docker-compose ps                    # æŸ¥çœ‹å®¹å™¨çŠ¶æ€     â”‚
â”‚     curl http://localhost:8080/health    # åç«¯å¥åº·æ£€æŸ¥     â”‚
â”‚     curl http://localhost                # å‰ç«¯è®¿é—®æµ‹è¯•     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. è®¿é—®æœåŠ¡                                                 â”‚
â”‚     http://8.140.19.7        â†’ å‰ç«¯é¡µé¢                     â”‚
â”‚     http://8.140.19.7/api/*  â†’ åç«¯ API                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ å››ã€å¸¸ç”¨è¿ç»´å‘½ä»¤

### **Docker Compose å‘½ä»¤ï¼š**

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f app      # åç«¯æ—¥å¿—
docker-compose logs -f web      # å‰ç«¯æ—¥å¿—

# é‡å¯å•ä¸ªæœåŠ¡
docker-compose restart app

# è¿›å…¥å®¹å™¨
docker exec -it coderhub-app bash
docker exec -it coderhub-mysql bash
```

### **Git å‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹çŠ¶æ€
git status

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin feature/server-deploy

# æäº¤ä»£ç 
git add .
git commit -m "feat: æ–°åŠŸèƒ½æè¿°"
git push origin feature/server-deploy

# æŸ¥çœ‹æäº¤å†å²
git log --oneline -10
```

### **ç³»ç»Ÿç›‘æ§å‘½ä»¤ï¼š**

```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºå ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h
du -sh /opt/coderhub/*

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# æ¸…ç† Docker ç¼“å­˜
docker system prune -a
```

---

## ğŸ“Š äº”ã€æŠ€æœ¯æ ˆæ€»è§ˆ

### **åç«¯æŠ€æœ¯æ ˆï¼š**

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ ¸å¿ƒæ¡†æ¶** | Spring Boot | 3.2.5 | Web åº”ç”¨æ¡†æ¶ |
| **ç¼–ç¨‹è¯­è¨€** | Java | 17 | ä¸»è¯­è¨€ |
| **æ„å»ºå·¥å…·** | Maven | 3.8.5 | ä¾èµ–ç®¡ç† + æ‰“åŒ… |
| **æ•°æ®åº“** | MySQL | 8.0 | å…³ç³»å‹æ•°æ®åº“ |
| **ORM** | MyBatis | 3.0.3 | æŒä¹…å±‚æ¡†æ¶ |
| **ç¼“å­˜** | Redis | 7.0 | åˆ†å¸ƒå¼ç¼“å­˜ |
| **å¯¹è±¡å­˜å‚¨** | MinIO | 8.5.9 | æ–‡ä»¶å­˜å‚¨ |
| **å‘é‡æ•°æ®åº“** | ChromaDB | 0.5.0 | AI è¯­ä¹‰æ£€ç´¢ |
| **AI æ¡†æ¶** | LangChain4j | 0.35.0 | AI åº”ç”¨å¼€å‘ |
| **è¿æ¥æ± ** | Druid | 1.2.21 | æ•°æ®åº“è¿æ¥æ±  |
| **è®¤è¯** | JWT | 0.12.5 | Token è®¤è¯ |
| **API æ–‡æ¡£** | SpringDoc | 2.3.0 | OpenAPI 3.0 |

### **å‰ç«¯æŠ€æœ¯æ ˆï¼š**

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ ¸å¿ƒæ¡†æ¶** | Vue.js | 3.5.22 | æ¸è¿›å¼æ¡†æ¶ |
| **æ„å»ºå·¥å…·** | Vite | 7.1.7 | å¿«é€Ÿæ„å»º |
| **è·¯ç”±** | Vue Router | 4.2.5 | å•é¡µåº”ç”¨è·¯ç”± |
| **çŠ¶æ€ç®¡ç†** | Pinia | 2.1.7 | çŠ¶æ€ç®¡ç† |
| **HTTP å®¢æˆ·ç«¯** | Axios | 1.6.0 | API è¯·æ±‚ |
| **Markdown** | Marked | 11.2.0 | Markdown æ¸²æŸ“ |
| **ä»£ç é«˜äº®** | Highlight.js | 11.11.1 | ä»£ç è¯­æ³•é«˜äº® |
| **PDF é¢„è§ˆ** | PDF.js | 3.11.174 | PDF æ–‡ä»¶é¢„è§ˆ |
| **Web æœåŠ¡å™¨** | Nginx | stable-alpine | é™æ€æ–‡ä»¶ + åå‘ä»£ç† |

### **åŸºç¡€è®¾æ–½ï¼š**

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **å®¹å™¨åŒ–** | Docker | Latest | åº”ç”¨å®¹å™¨åŒ– |
| **ç¼–æ’** | Docker Compose | 3.8 | å¤šå®¹å™¨ç¼–æ’ |
| **ç‰ˆæœ¬æ§åˆ¶** | Git | Latest | ä»£ç ç‰ˆæœ¬ç®¡ç† |
| **ä»£ç æ‰˜ç®¡** | GitHub | - | è¿œç¨‹ä»“åº“ |
| **æœåŠ¡å™¨** | é˜¿é‡Œäº‘ ECS | 2GB å†…å­˜ | ç”Ÿäº§ç¯å¢ƒ |
| **æ“ä½œç³»ç»Ÿ** | Linux | 5.10.134 | CentOS/AlmaLinux |

---

## ğŸ” å…­ã€å®‰å…¨æ³¨æ„äº‹é¡¹

### **å½“å‰å­˜åœ¨çš„å®‰å…¨é—®é¢˜ï¼š**

| é—®é¢˜ | é£é™©ç­‰çº§ | ä½ç½® | å»ºè®® |
|------|----------|------|------|
| **æ•°æ®åº“å¯†ç æ˜æ–‡** | ğŸ”´ é«˜ | docker-compose.yml | æ”¹ç”¨ `.env` æ–‡ä»¶ |
| **Redis æ— å¯†ç ** | ğŸŸ¡ ä¸­ | docker-compose.yml | æ·»åŠ å¯†ç è®¤è¯ |
| **MinIO å¼±å¯†ç ** | ğŸŸ¡ ä¸­ | docker-compose.yml | ä½¿ç”¨å¼ºå¯†ç  |
| **ç«¯å£å…¨éƒ¨æš´éœ²** | ğŸŸ¡ ä¸­ | docker-compose.yml | ä»…æš´éœ²å¿…è¦ç«¯å£ |
| **Git Token æ˜æ–‡** | ğŸ”´ é«˜ | ç»ˆç«¯å†å² | ä½¿ç”¨ SSH Key |

### **æ”¹è¿›å»ºè®®ï¼š**

1. **ä½¿ç”¨ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š**
   ```bash
   # åˆ›å»º .env æ–‡ä»¶ï¼ˆä¸æäº¤ Gitï¼‰
   DB_PASSWORD=your_strong_password
   REDIS_PASSWORD=your_redis_password
   MINIO_ROOT_PASSWORD=your_minio_password
   ```

2. **é™åˆ¶ç«¯å£æš´éœ²ï¼š**
   ```yaml
   # ä»…æš´éœ²å¿…è¦ç«¯å£
   ports:
     - "127.0.0.1:3306:3306"  # MySQL ä»…æœ¬åœ°è®¿é—®
   ```

3. **é…ç½®é˜²ç«å¢™ï¼š**
   ```bash
   # ä»…å¼€æ”¾ 80ã€443ã€22 ç«¯å£
   firewall-cmd --permanent --add-service=http
   firewall-cmd --permanent --add-service=https
   firewall-cmd --reload
   ```

---

## ğŸ“ˆ ä¸ƒã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### **å½“å‰é…ç½®ï¼ˆ2GB å†…å­˜ ECSï¼‰ï¼š**

| æœåŠ¡ | å†…å­˜é™åˆ¶ | å®é™…å ç”¨ | ä¼˜åŒ–ç©ºé—´ |
|------|----------|----------|----------|
| MySQL | 512M | ~400M | âœ… åˆç† |
| Redis | 256M | ~50M | âœ… åˆç† |
| MinIO | 300M | ~150M | âœ… åˆç† |
| ChromaDB | 300M | ~100M | âœ… åˆç† |
| Backend | 800M | ~600M | âš ï¸ åç´§ |
| Frontend | 300M | ~50M | âœ… åˆç† |

**æ€»è®¡ï¼š** 2.5GBï¼ˆè¶…å‡ºç‰©ç†å†…å­˜ï¼Œä¾èµ– Swapï¼‰

### **ä¼˜åŒ–å»ºè®®ï¼š**

1. **å‡çº§æœåŠ¡å™¨é…ç½®ï¼š** å»ºè®®å‡çº§åˆ° 4GB å†…å­˜
2. **å¯ç”¨ Swapï¼š** é…ç½® 2GB Swap ç©ºé—´
3. **ä¼˜åŒ– JVM å‚æ•°ï¼š** æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ `-Xmx` å’Œ `-Xms`
4. **æ•°æ®åº“ä¼˜åŒ–ï¼š** å®šæœŸæ¸…ç†æ—¥å¿—ã€ä¼˜åŒ–ç´¢å¼•

---

## ğŸ“ å…«ã€æ€»ç»“

### **é¡¹ç›®ç‰¹ç‚¹ï¼š**
- âœ… å‰åç«¯åˆ†ç¦»æ¶æ„
- âœ… Docker å®¹å™¨åŒ–éƒ¨ç½²
- âœ… å¤šæ¨¡å— Maven å·¥ç¨‹
- âœ… é›†æˆ AI åŠŸèƒ½ï¼ˆLangChain4j + ChromaDBï¼‰
- âœ… å®Œæ•´çš„æŠ€æœ¯æ ˆï¼ˆSpring Boot + Vue3ï¼‰

### **å½“å‰çŠ¶æ€ï¼š**
- âœ… å·²éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆ8.140.19.7ï¼‰
- âœ… Git ç‰ˆæœ¬æ§åˆ¶å·²åˆå§‹åŒ–
- âœ… Docker Compose ç¼–æ’å®Œæ•´
- âš ï¸ é…ç½®ä¸ä»£ç è€¦åˆï¼ˆå¾…ä¼˜åŒ–ï¼‰
- âš ï¸ å®‰å…¨é…ç½®å¾…åŠ å¼º

### **åç»­ä¼˜åŒ–æ–¹å‘ï¼š**
1. é…ç½®ä¸ä»£ç åˆ†ç¦»ï¼ˆç¯å¢ƒå˜é‡ï¼‰
2. å®æ–½ CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²
3. åŠ å¼ºå®‰å…¨é…ç½®
4. æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–
5. å¤‡ä»½ç­–ç•¥åˆ¶å®š

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**æ›´æ–°æ—¥æœŸï¼š** 2026-01-31  
**ç»´æŠ¤è€…ï¼š** Ea1XonCodeHou  
**GitHubï¼š** https://github.com/Ea1XonCodeHou/CoderHub

---

è¿™ä»½æ–‡æ¡£å¯ä»¥ç›´æ¥æä¾›ç»™å…¶ä»– LLM æˆ–å›¢é˜Ÿæˆå‘˜å‚è€ƒï¼Œæ¶µç›–äº†é¡¹ç›®çš„å®Œæ•´ç»“æ„ã€é…ç½®ç»†èŠ‚å’Œè¿ç»´è¦ç‚¹ï¼ğŸš€